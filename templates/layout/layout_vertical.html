{% extends 'layout/master.html' %}


{% block layout %}
<!-- Layout wrapper: Start -->
<div class="layout-wrapper layout-content-navbar {{ is_menu|yesno:',layout-without-menu' }}">
  <div class="layout-container">

    {% if is_menu %}
    <!-- Menu: Start -->
    {% include "../layout/partials/menu/vertical/vertical_menu.html" %}
    <!-- Menu: End -->
    {% endif %}

    <!-- Layout page: Start -->
    <div class="layout-page">


      {% if is_navbar %}
      <!-- Navbar: Start -->
      {% include "../layout/partials/navbar/navbar.html" %}
      <!-- Navbar: End -->
      {% endif %}


      <!-- Content wrapper: Start -->
      <div class="content-wrapper">
        <!-- Content: Start -->
        {% if is_flex %}
        <div class="{{container_class}} d-flex align-items-stretch flex-grow-1 p-0">
          {% else %}
          <div class="{{container_class}} flex-grow-1 container-p-y">
            {% endif %}
            {% block content %}
            {% endblock content %}

          </div>
          <!-- / Content: End -->

          {% if is_footer %}
          <!-- Footer: Start -->
          {% include "../layout/partials/footer/footer.html" %}
          <!-- Footer: End -->
          {% endif %}

          <div class="content-backdrop fade"></div>
        </div>
        <!--/ Content wrapper: End -->
      </div>
      <!-- / Layout page: End -->
    </div>

    {% if is_menu %}
    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
    {% endif %}
    <!-- Drag Target Area To SlideIn Menu On Small Screens -->
    <div class="drag-target"></div>
  </div>
  <!-- Layout wrapper: End -->

  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay">
    <div class="loading-spinner"></div>
  </div>

  <style>
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.9);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }

    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 5px solid #f3f3f3;
      border-top: 5px solid #696cff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Show loading overlay when clicking menu links
      document.querySelectorAll('.menu-link').forEach(link => {
        link.addEventListener('click', function(e) {
          // Only show loading for actual navigation links (not toggle links)
          if (!this.getAttribute('href')?.startsWith('javascript:')) {
            document.getElementById('loading-overlay').style.display = 'flex';
          }
        });
      });

      // Hide loading overlay when page is fully loaded
      window.addEventListener('load', function() {
        document.getElementById('loading-overlay').style.display = 'none';
      });
    });
  </script>
  {% endblock layout %}
